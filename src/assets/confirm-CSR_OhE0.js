import{_ as e,u as l,a,d as o,k as t,p as s}from"./index-DrVrvTnw.js";import{aD as i,c as n,r as u,f as r,X as d,k as v,u as p,Y as c,a4 as m,F as f,aa as y,y as b,t as w,an as x,g as h,B as g,az as k,W as S,ay as T}from"./vue-vendor-kmzIwNuM.js";import{_ as C}from"./avatar-uebtgHRc.js";import{d as A,e as j,f as F,h as U}from"./index-CgrsWaw5.js";import{s as z}from"./ui-vendor-B3b54x8g.js";import"./lodash-es-Bns1-fiI.js";const D={class:"box"},I={class:"box-t"},_={class:"box-t-name"},E={class:"box-t-test"},R={class:"box-t-test"},N={class:"box-t-test"},q={style:{display:"flex","align-items":"center","justify-content":"space-between",margin:"20px 0 10px"}},L={style:{"font-size":"13px"}},O={class:"box-selects"},V=["onClick"],B={style:{margin:"10px 0 15px"}},J={style:{"font-size":"13px"}},M={class:"box-tab"},P={class:"box-inp"},W=["placeholder"],X=["placeholder"],Y={class:"box-buts"},G=e({__name:"confirm",setup(e){const{t:G}=l(),H=T(),K=k(),Q=a(),Z=o(),{asset:$}=i(Z),ee=n(()=>{let e=[];return $.value.forEach(l=>{var a,o;let t={};t.keyong=s(l.availableAmount),t.zhanyong=s(l.occupiedAmount),t.zhehe=s(l.exchageAmount),"usdt"==l.symbol?(t.icon="usdt",t.loge=l.loge,t.title="USDT",e.unshift(t)):(t.loge=l.loge,t.title=null==(a=l.symbol)?void 0:a.replace("usdt","").trim().toLocaleUpperCase(),t.icon=null==(o=l.symbol)?void 0:o.replace("usdt","").trim(),e.push(t))}),e}),le=n(()=>{let e=0;for(let l=0;l<ee.value.length;l++)e+=Number(ee.value[l].zhehe);return s(e)}),ae=n(()=>Q.optionList),oe=u([]),te=()=>{oe.value=ae.value.map(e=>e.symbol)},se=u(0),ie=u(),ne=u(),ue=()=>{A({traderId:K.params.id}).then(e=>{z(e.msg),setTimeout(()=>{window.localStorage.removeItem("updateTrader"),H.back()},1e3)})},re=()=>{if(0===oe.value.length)return void z(G("pleaseSelectFollowCoin"));if(0==se.value&&!ie.value)return void z(G("pleaseEnterFollowRate"));if(1==se.value&&!ne.value)return void z(G("pleaseEnterFollowAmount"));let e={followType:se.value,followRate:ie.value,followAmount:ne.value,followSymbol:oe.value.join(","),traderId:K.params.id};"update"===K.query.type?j(e).then(e=>{z(e.msg),setTimeout(()=>{H.back()},1e3)}):F(e).then(e=>{z(e.msg),setTimeout(()=>{H.back()},1e3)}),window.localStorage.removeItem("updateTrader")},de=u({});return r(()=>{if((async()=>{const e=await U(K.params.id);de.value=e.data})(),K.query.type){const e=JSON.parse(window.localStorage.getItem("updateTrader"));se.value=e.followType,ie.value=e.followRate,ne.value=e.followAmount,oe.value=e.followSymbol.split(",")}}),(e,l)=>{var a,o,s,i;const n=t;return S(),d(f,null,[v(n,{title:p(G)("followSetting")},null,8,["title"]),c("div",D,[c("div",I,[c("div",null,[c("div",_,m(null==(a=p(de))?void 0:a.traderName),1),c("div",E,m(p(G)("followDays"))+": "+m((null==(o=p(de))?void 0:o.followOrder)||0),1),c("div",R,m(p(G)("followPeople"))+": "+m((null==(s=p(de))?void 0:s.followUser)||0),1),c("div",N,m(p(G)("profit1"))+"(USDT): "+m((null==(i=p(de))?void 0:i.rewardAmount)||0),1)]),l[4]||(l[4]=c("img",{src:C,alt:"",style:{width:"50px",height:"50px"}},null,-1))]),c("div",q,[c("div",L,m(p(G)("followCoin")),1),c("div",{style:{"font-size":"13px",color:"#04c275"},onClick:te},m(p(G)("allSelect")),1)]),c("div",O,[(S(!0),d(f,null,y(p(ae),e=>(S(),d("div",{class:b(["box-selects-item",{active:p(oe).includes(e.symbol)}]),key:e.id,onClick:l=>{return a=e.symbol,void(oe.value.includes(a)?oe.value=oe.value.filter(e=>e!==a):oe.value.push(a));var a}},m(e.showSymbol),11,V))),128))]),c("div",B,[c("div",J,m(p(G)("followMode")),1)]),c("div",M,[c("div",{onClick:l[0]||(l[0]=e=>se.value=0),class:b({active:0==p(se)})},m(p(G)("fixedFollow")),3),c("div",{onClick:l[1]||(l[1]=e=>se.value=1),class:b({active:1==p(se)})},m(p(G)("fixedAmount")),3)]),c("div",P,[0==p(se)?(S(),d(f,{key:0},[w(c("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>h(ie)?ie.value=e:null),type:"number",maxlength:"140",placeholder:p(G)("pleaseEnterFollowRate1"),step:"0.000000000000000001",enterkeyhint:"done",pattern:"[0-9]*",class:"uni-input-input",autocomplete:"off"},null,8,W),[[x,p(ie)]]),l[5]||(l[5]=c("div",null,"%",-1))],64)):(S(),d(f,{key:1},[w(c("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>h(ne)?ne.value=e:null),type:"number",maxlength:"140",placeholder:p(G)("pleaseEnterFollowAmount1"),step:"0.000000000000000001",enterkeyhint:"done",pattern:"[0-9]*",class:"uni-input-input",autocomplete:"off"},null,8,X),[[x,p(ne)]]),l[6]||(l[6]=c("div",null,"USDT",-1))],64))]),c("div",null,[c("samp",null,m(p(G)("available")),1),g(" "+m(p(le))+" USDT ",1)]),c("div",Y,[c("div",{onClick:ue,class:"box-but",style:{"margin-right":"10px"}},m(p(G)("endFollow")),1),c("div",{onClick:re,class:"box-but active"},m(p(G)("confirm")),1)])])],64)}}},[["__scopeId","data-v-83f590f7"]]);export{G as default};
